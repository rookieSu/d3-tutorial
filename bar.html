<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./js/d3.7.6.1.js"></script>
    <style>
      rect {
        width: 10px;
      }
    </style>
  </head>

  <body>
    <div>
      <button onclick="zoom('big')">放大</button>
      <button onclick="zoom('small')">缩小</button>
      <svg width="100%" height="1000"></svg>
    </div>
  </body>
  <script>
    let scale = 1;
    let data = [50, 100, 150, 200];
    let mainGroup = d3.select("svg").append("g");
    let maxHeight = d3.max(data);
    let barGroup = mainGroup
      .selectAll("g")
      .data(data)
      .join("g")
      .attr("transform", (d, i) => {
        return `translate(${10 * (i * 2 + 1)} ${maxHeight - d})`;
      })
      .style("transform-origin", "0 50");
    barGroup
      .append("rect")
      .transition()
      .duration(1000)
      .attr("height", (d) => d);

    function zoom(type) {
      console.log(type);
      if (type === "big") {
        mainGroup
          .transition()
          .duration(1000)
          .attr("transform", (d, i) => {
            return `scale(${++scale})`;
          });
      }else{
        mainGroup
          .transition()
          .duration(500)
          .attr("transform", (d, i) => {
            return `scale(${--scale})`;
          });
      }
    }
  </script>
</html>
